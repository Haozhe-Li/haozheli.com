<!DOCTYPE html>
<html>
  <head>
    <title>Plagiarism Detection</title>
    <script>
      // JavaScript code goes here
      // ...

      // Preprocess the text: tokenize and convert to lowercase
    function preprocessText(rawText) {
        let tokens = [];
        let token = "";
        for (let i = 0; i < rawText.length; i++) {
        let c = rawText[i];
        if (/[a-zA-Z0-9]/.test(c)) {
            token += c.toLowerCase();
        } else if (token !== "") {
            tokens.push(token);
            token = "";
        }
        }
        if (token !== "") {
        tokens.push(token);
        }
        return tokens;
    }
    
    // Create windows from the processed text
    function createWindows(processedText, windowSize) {
      let windows = [];
      for (let i = 0; i <= processedText.length - windowSize; i++) {
          let window = "";
          for (let j = i; j < i + windowSize; j++) {
              window += processedText[j];
              // Only add a space if it's not the last word in the window
              if (j < i + windowSize - 1) {
                  window += " ";
              }
          }
          windows.push(window);
      }
      return windows;
    }

    // Hash the windows using a simple hash function (you should replace this with a better hash function)
    function hashWindows(windows) {
      let hashes = [];
      for (let i = 0; i < windows.length; i++) {
          let hash = 0;
          for (let j = 0; j < windows[i].length; j++) {
              let c = windows[i].charCodeAt(j);
              hash = 31 * hash + c;
          }
          hashes.push(hash);
      }
      return hashes;
    }

    
    // Get the fingerprints from the hashes
    function getFingerprints(hashes) {
        let fingerprints = new Set();
        for (let i = 0; i < hashes.length; i++) {
        fingerprints.add(hashes[i]);
        }
        return fingerprints;
    }

      // Detect plagiarism by comparing the fingerprints
function detectPlagiarism(fingerprints1, fingerprints2) {
  for (let fingerprint of fingerprints1) {
  if (fingerprints2.has(fingerprint)) {
      return true;
  }
  }
  return false;
}

    function runPlagiarismDetection() {
      // Get the input text from the textboxes
      let text1 = document.getElementById("text1").value;
      let text2 = document.getElementById("text2").value;
      let windowSize = document.getElementById("window").value;

      // Preprocess the texts
      let processedText1 = preprocessText(text1);
      let processedText2 = preprocessText(text2);

      // Create windows
      let windows1 = createWindows(processedText1, windowSize);
      let windows2 = createWindows(processedText2, windowSize);

      // Hash the windows
      let hashes1 = hashWindows(windows1);
      let hashes2 = hashWindows(windows2);

      // Get the fingerprints
      let fingerprints1 = getFingerprints(hashes1);
      let fingerprints2 = getFingerprints(hashes2);

      // Detect plagiarism
  let isPlagiarized = detectPlagiarism(fingerprints1, fingerprints2);

  // Display the result
  document.getElementById("result").innerText = isPlagiarized ? "True" : "False";
    }
    
    </script>
  </head>
  <body>
    <h1>Plagiarism Detection</h1>
    <label for="window">Window Size:</label>
    <br />
    <textarea id="window" rows="1" cols="100" placeholder="Enter your window size here. The bigger the window, the more accurate result, but need more text inputs."></textarea>
    <br />
    <label for="text1">Text 1:</label>
    <br />
    <textarea id="text1" rows="10" cols="200" placeholder="Enter your first text here"></textarea>
    <br />
    <label for="text2">Text 2:</label>
    <br />
    <textarea id="text2" rows="10" cols="200" placeholder="Enter your second text here"></textarea>
    <br />
    <button onclick="runPlagiarismDetection()">Detect Plagiarism</button>
    <br />
    <p>The similarity between two text in percentage is: </p><p id="result"></p>

    <script>
      // Place additional JavaScript code here if needed
    </script>
  </body>
</html>
